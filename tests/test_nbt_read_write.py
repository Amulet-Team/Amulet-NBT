import unittest
from typing import List, Tuple

import amulet_nbt
from amulet_nbt import (
    TAG_Byte,
    TAG_Short,
    TAG_Int,
    TAG_Long,
    TAG_Float,
    TAG_Double,
    TAG_Byte_Array,
    TAG_Int_Array,
    TAG_Long_Array,
    TAG_String,
    TAG_List,
    TAG_Compound,
    NBTFile,
)


tests: List[Tuple[NBTFile, bytes, bytes]] = [
    (NBTFile(TAG_Byte(5), ""), b"\x01\x00\x00\x05", b"\x01\x00\x00\x05"),
    (NBTFile(TAG_Byte(-5), ""), b"\x01\x00\x00\xfb", b"\x01\x00\x00\xfb"),
    (NBTFile(TAG_Short(5), ""), b"\x02\x00\x00\x00\x05", b"\x02\x00\x00\x05\x00"),
    (NBTFile(TAG_Short(-5), ""), b"\x02\x00\x00\xff\xfb", b"\x02\x00\x00\xfb\xff"),
    (
        NBTFile(TAG_Int(5), ""),
        b"\x03\x00\x00\x00\x00\x00\x05",
        b"\x03\x00\x00\x05\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Int(-5), ""),
        b"\x03\x00\x00\xff\xff\xff\xfb",
        b"\x03\x00\x00\xfb\xff\xff\xff",
    ),
    (
        NBTFile(TAG_Long(5), ""),
        b"\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x05",
        b"\x04\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Long(-5), ""),
        b"\x04\x00\x00\xff\xff\xff\xff\xff\xff\xff\xfb",
        b"\x04\x00\x00\xfb\xff\xff\xff\xff\xff\xff\xff",
    ),
    (
        NBTFile(TAG_Float(5.0), ""),
        b"\x05\x00\x00\x40\xa0\x00\x00",
        b"\x05\x00\x00\x00\x00\xa0\x40",
    ),
    (
        NBTFile(TAG_Float(-5.0), ""),
        b"\x05\x00\x00\xc0\xa0\x00\x00",
        b"\x05\x00\x00\x00\x00\xa0\xc0",
    ),
    (
        NBTFile(TAG_Double(5.0), ""),
        b"\x06\x00\x00\x40\x14\x00\x00\x00\x00\x00\x00",
        b"\x06\x00\x00\x00\x00\x00\x00\x00\x00\x14\x40",
    ),
    (
        NBTFile(TAG_Double(-5.0), ""),
        b"\x06\x00\x00\xc0\x14\x00\x00\x00\x00\x00\x00",
        b"\x06\x00\x00\x00\x00\x00\x00\x00\x00\x14\xc0",
    ),
    (
        NBTFile(TAG_Byte_Array([]), ""),
        b"\x07\x00\x00\x00\x00\x00\x00",
        b"\x07\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Byte_Array([5, 6, 7]), ""),
        b"\x07\x00\x00\x00\x00\x00\x03\x05\x06\x07",
        b"\x07\x00\x00\x03\x00\x00\x00\x05\x06\x07",
    ),
    (
        NBTFile(TAG_Byte_Array([-5, -6, -7]), ""),
        b"\x07\x00\x00\x00\x00\x00\x03\xfb\xfa\xf9",
        b"\x07\x00\x00\x03\x00\x00\x00\xfb\xfa\xf9",
    ),
    (
        NBTFile(TAG_Int_Array([]), ""),
        b"\x0b\x00\x00\x00\x00\x00\x00",
        b"\x0b\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Int_Array([5, 6, 7]), ""),
        b"\x0b\x00\x00\x00\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07",
        b"\x0b\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Int_Array([-5, -6, -7]), ""),
        b"\x0b\x00\x00\x00\x00\x00\x03\xff\xff\xff\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9",
        b"\x0b\x00\x00\x03\x00\x00\x00\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9\xff\xff\xff",
    ),
    (
        NBTFile(TAG_Long_Array([]), ""),
        b"\x0c\x00\x00\x00\x00\x00\x00",
        b"\x0c\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Long_Array([5, 6, 7]), ""),
        b"\x0c\x00\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07",
        b"\x0c\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Long_Array([-5, -6, -7]), ""),
        b"\x0c\x00\x00\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9",
        b"\x0c\x00\x00\x03\x00\x00\x00\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9\xff\xff\xff\xff\xff\xff\xff",
    ),
    (
        NBTFile(TAG_String("value"), ""),
        b"\x08\x00\x00\x00\x05value",
        b"\x08\x00\x00\x05\x00value",
    ),
    (
        NBTFile(TAG_List([], 1), ""),
        b"\t\x00\x00\x01\x00\x00\x00\x00",
        b"\t\x00\x00\x01\x00\x00\x00\x00",
    ),
    (NBTFile(TAG_Compound({}), ""), b"\n\x00\x00\x00", b"\n\x00\x00\x00"),
    (
        NBTFile(TAG_List([TAG_Byte(5)], 1), ""),
        b"\t\x00\x00\x01\x00\x00\x00\x01\x05",
        b"\t\x00\x00\x01\x01\x00\x00\x00\x05",
    ),
    (
        NBTFile(TAG_List([TAG_Byte(-5)], 1), ""),
        b"\t\x00\x00\x01\x00\x00\x00\x01\xfb",
        b"\t\x00\x00\x01\x01\x00\x00\x00\xfb",
    ),
    (
        NBTFile(TAG_List([TAG_Short(5)], 2), ""),
        b"\t\x00\x00\x02\x00\x00\x00\x01\x00\x05",
        b"\t\x00\x00\x02\x01\x00\x00\x00\x05\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Short(-5)], 2), ""),
        b"\t\x00\x00\x02\x00\x00\x00\x01\xff\xfb",
        b"\t\x00\x00\x02\x01\x00\x00\x00\xfb\xff",
    ),
    (
        NBTFile(TAG_List([TAG_Int(5)], 3), ""),
        b"\t\x00\x00\x03\x00\x00\x00\x01\x00\x00\x00\x05",
        b"\t\x00\x00\x03\x01\x00\x00\x00\x05\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Int(-5)], 3), ""),
        b"\t\x00\x00\x03\x00\x00\x00\x01\xff\xff\xff\xfb",
        b"\t\x00\x00\x03\x01\x00\x00\x00\xfb\xff\xff\xff",
    ),
    (
        NBTFile(TAG_List([TAG_Long(5)], 4), ""),
        b"\t\x00\x00\x04\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x05",
        b"\t\x00\x00\x04\x01\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Long(-5)], 4), ""),
        b"\t\x00\x00\x04\x00\x00\x00\x01\xff\xff\xff\xff\xff\xff\xff\xfb",
        b"\t\x00\x00\x04\x01\x00\x00\x00\xfb\xff\xff\xff\xff\xff\xff\xff",
    ),
    (
        NBTFile(TAG_List([TAG_Float(5.0)], 5), ""),
        b"\t\x00\x00\x05\x00\x00\x00\x01\x40\xa0\x00\x00",
        b"\t\x00\x00\x05\x01\x00\x00\x00\x00\x00\xa0\x40",
    ),
    (
        NBTFile(TAG_List([TAG_Float(-5.0)], 5), ""),
        b"\t\x00\x00\x05\x00\x00\x00\x01\xc0\xa0\x00\x00",
        b"\t\x00\x00\x05\x01\x00\x00\x00\x00\x00\xa0\xc0",
    ),
    (
        NBTFile(TAG_List([TAG_Double(5.0)], 6), ""),
        b"\t\x00\x00\x06\x00\x00\x00\x01\x40\x14\x00\x00\x00\x00\x00\x00",
        b"\t\x00\x00\x06\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x14\x40",
    ),
    (
        NBTFile(TAG_List([TAG_Double(-5.0)], 6), ""),
        b"\t\x00\x00\x06\x00\x00\x00\x01\xc0\x14\x00\x00\x00\x00\x00\x00",
        b"\t\x00\x00\x06\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x14\xc0",
    ),
    (
        NBTFile(TAG_List([TAG_Byte_Array([])], 7), ""),
        b"\t\x00\x00\x07\x00\x00\x00\x01\x00\x00\x00\x00",
        b"\t\x00\x00\x07\x01\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Byte_Array([5, 6, 7])], 7), ""),
        b"\t\x00\x00\x07\x00\x00\x00\x01\x00\x00\x00\x03\x05\x06\x07",
        b"\t\x00\x00\x07\x01\x00\x00\x00\x03\x00\x00\x00\x05\x06\x07",
    ),
    (
        NBTFile(TAG_List([TAG_Byte_Array([-5, -6, -7])], 7), ""),
        b"\t\x00\x00\x07\x00\x00\x00\x01\x00\x00\x00\x03\xfb\xfa\xf9",
        b"\t\x00\x00\x07\x01\x00\x00\x00\x03\x00\x00\x00\xfb\xfa\xf9",
    ),
    (
        NBTFile(TAG_List([TAG_Int_Array([])], 11), ""),
        b"\t\x00\x00\x0b\x00\x00\x00\x01\x00\x00\x00\x00",
        b"\t\x00\x00\x0b\x01\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Int_Array([5, 6, 7])], 11), ""),
        b"\t\x00\x00\x0b\x00\x00\x00\x01\x00\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07",
        b"\t\x00\x00\x0b\x01\x00\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Int_Array([-5, -6, -7])], 11), ""),
        b"\t\x00\x00\x0b\x00\x00\x00\x01\x00\x00\x00\x03\xff\xff\xff\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9",
        b"\t\x00\x00\x0b\x01\x00\x00\x00\x03\x00\x00\x00\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9\xff\xff\xff",
    ),
    (
        NBTFile(TAG_List([TAG_Long_Array([])], 12), ""),
        b"\t\x00\x00\x0c\x00\x00\x00\x01\x00\x00\x00\x00",
        b"\t\x00\x00\x0c\x01\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Long_Array([5, 6, 7])], 12), ""),
        b"\t\x00\x00\x0c\x00\x00\x00\x01\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07",
        b"\t\x00\x00\x0c\x01\x00\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Long_Array([-5, -6, -7])], 12), ""),
        b"\t\x00\x00\x0c\x00\x00\x00\x01\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9",
        b"\t\x00\x00\x0c\x01\x00\x00\x00\x03\x00\x00\x00\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9\xff\xff\xff\xff\xff\xff\xff",
    ),
    (
        NBTFile(TAG_List([TAG_String("value")], 8), ""),
        b"\t\x00\x00\x08\x00\x00\x00\x01\x00\x05value",
        b"\t\x00\x00\x08\x01\x00\x00\x00\x05\x00value",
    ),
    (
        NBTFile(TAG_List([TAG_List([], 1)], 9), ""),
        b"\t\x00\x00\t\x00\x00\x00\x01\x01\x00\x00\x00\x00",
        b"\t\x00\x00\t\x01\x00\x00\x00\x01\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Compound({})], 10), ""),
        b"\t\x00\x00\n\x00\x00\x00\x01\x00",
        b"\t\x00\x00\n\x01\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Byte(5)}), ""),
        b"\n\x00\x00\x01\x00\x03key\x05\x00",
        b"\n\x00\x00\x01\x03\x00key\x05\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Byte(-5)}), ""),
        b"\n\x00\x00\x01\x00\x03key\xfb\x00",
        b"\n\x00\x00\x01\x03\x00key\xfb\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Short(5)}), ""),
        b"\n\x00\x00\x02\x00\x03key\x00\x05\x00",
        b"\n\x00\x00\x02\x03\x00key\x05\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Short(-5)}), ""),
        b"\n\x00\x00\x02\x00\x03key\xff\xfb\x00",
        b"\n\x00\x00\x02\x03\x00key\xfb\xff\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Int(5)}), ""),
        b"\n\x00\x00\x03\x00\x03key\x00\x00\x00\x05\x00",
        b"\n\x00\x00\x03\x03\x00key\x05\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Int(-5)}), ""),
        b"\n\x00\x00\x03\x00\x03key\xff\xff\xff\xfb\x00",
        b"\n\x00\x00\x03\x03\x00key\xfb\xff\xff\xff\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Long(5)}), ""),
        b"\n\x00\x00\x04\x00\x03key\x00\x00\x00\x00\x00\x00\x00\x05\x00",
        b"\n\x00\x00\x04\x03\x00key\x05\x00\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Long(-5)}), ""),
        b"\n\x00\x00\x04\x00\x03key\xff\xff\xff\xff\xff\xff\xff\xfb\x00",
        b"\n\x00\x00\x04\x03\x00key\xfb\xff\xff\xff\xff\xff\xff\xff\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Float(5.0)}), ""),
        b"\n\x00\x00\x05\x00\x03key\x40\xa0\x00\x00\x00",
        b"\n\x00\x00\x05\x03\x00key\x00\x00\xa0\x40\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Float(-5.0)}), ""),
        b"\n\x00\x00\x05\x00\x03key\xc0\xa0\x00\x00\x00",
        b"\n\x00\x00\x05\x03\x00key\x00\x00\xa0\xc0\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Double(5.0)}), ""),
        b"\n\x00\x00\x06\x00\x03key\x40\x14\x00\x00\x00\x00\x00\x00\x00",
        b"\n\x00\x00\x06\x03\x00key\x00\x00\x00\x00\x00\x00\x14\x40\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Double(-5.0)}), ""),
        b"\n\x00\x00\x06\x00\x03key\xc0\x14\x00\x00\x00\x00\x00\x00\x00",
        b"\n\x00\x00\x06\x03\x00key\x00\x00\x00\x00\x00\x00\x14\xc0\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Byte_Array([])}), ""),
        b"\n\x00\x00\x07\x00\x03key\x00\x00\x00\x00\x00",
        b"\n\x00\x00\x07\x03\x00key\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Byte_Array([5, 6, 7])}), ""),
        b"\n\x00\x00\x07\x00\x03key\x00\x00\x00\x03\x05\x06\x07\x00",
        b"\n\x00\x00\x07\x03\x00key\x03\x00\x00\x00\x05\x06\x07\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Byte_Array([-5, -6, -7])}), ""),
        b"\n\x00\x00\x07\x00\x03key\x00\x00\x00\x03\xfb\xfa\xf9\x00",
        b"\n\x00\x00\x07\x03\x00key\x03\x00\x00\x00\xfb\xfa\xf9\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Int_Array([])}), ""),
        b"\n\x00\x00\x0b\x00\x03key\x00\x00\x00\x00\x00",
        b"\n\x00\x00\x0b\x03\x00key\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Int_Array([5, 6, 7])}), ""),
        b"\n\x00\x00\x0b\x00\x03key\x00\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07\x00",
        b"\n\x00\x00\x0b\x03\x00key\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Int_Array([-5, -6, -7])}), ""),
        b"\n\x00\x00\x0b\x00\x03key\x00\x00\x00\x03\xff\xff\xff\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9\x00",
        b"\n\x00\x00\x0b\x03\x00key\x03\x00\x00\x00\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9\xff\xff\xff\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Long_Array([])}), ""),
        b"\n\x00\x00\x0c\x00\x03key\x00\x00\x00\x00\x00",
        b"\n\x00\x00\x0c\x03\x00key\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Long_Array([5, 6, 7])}), ""),
        b"\n\x00\x00\x0c\x00\x03key\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07\x00",
        b"\n\x00\x00\x0c\x03\x00key\x03\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07\x00\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Long_Array([-5, -6, -7])}), ""),
        b"\n\x00\x00\x0c\x00\x03key\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9\x00",
        b"\n\x00\x00\x0c\x03\x00key\x03\x00\x00\x00\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9\xff\xff\xff\xff\xff\xff\xff\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_String("value")}), ""),
        b"\n\x00\x00\x08\x00\x03key\x00\x05value\x00",
        b"\n\x00\x00\x08\x03\x00key\x05\x00value\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_List([], 1)}), ""),
        b"\n\x00\x00\t\x00\x03key\x01\x00\x00\x00\x00\x00",
        b"\n\x00\x00\t\x03\x00key\x01\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Compound({})}), ""),
        b"\n\x00\x00\n\x00\x03key\x00\x00",
        b"\n\x00\x00\n\x03\x00key\x00\x00",
    ),
    (NBTFile(TAG_Byte(5), "name"), b"\x01\x00\x04name\x05", b"\x01\x04\x00name\x05"),
    (NBTFile(TAG_Byte(-5), "name"), b"\x01\x00\x04name\xfb", b"\x01\x04\x00name\xfb"),
    (
        NBTFile(TAG_Short(5), "name"),
        b"\x02\x00\x04name\x00\x05",
        b"\x02\x04\x00name\x05\x00",
    ),
    (
        NBTFile(TAG_Short(-5), "name"),
        b"\x02\x00\x04name\xff\xfb",
        b"\x02\x04\x00name\xfb\xff",
    ),
    (
        NBTFile(TAG_Int(5), "name"),
        b"\x03\x00\x04name\x00\x00\x00\x05",
        b"\x03\x04\x00name\x05\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Int(-5), "name"),
        b"\x03\x00\x04name\xff\xff\xff\xfb",
        b"\x03\x04\x00name\xfb\xff\xff\xff",
    ),
    (
        NBTFile(TAG_Long(5), "name"),
        b"\x04\x00\x04name\x00\x00\x00\x00\x00\x00\x00\x05",
        b"\x04\x04\x00name\x05\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Long(-5), "name"),
        b"\x04\x00\x04name\xff\xff\xff\xff\xff\xff\xff\xfb",
        b"\x04\x04\x00name\xfb\xff\xff\xff\xff\xff\xff\xff",
    ),
    (
        NBTFile(TAG_Float(5.0), "name"),
        b"\x05\x00\x04name\x40\xa0\x00\x00",
        b"\x05\x04\x00name\x00\x00\xa0\x40",
    ),
    (
        NBTFile(TAG_Float(-5.0), "name"),
        b"\x05\x00\x04name\xc0\xa0\x00\x00",
        b"\x05\x04\x00name\x00\x00\xa0\xc0",
    ),
    (
        NBTFile(TAG_Double(5.0), "name"),
        b"\x06\x00\x04name\x40\x14\x00\x00\x00\x00\x00\x00",
        b"\x06\x04\x00name\x00\x00\x00\x00\x00\x00\x14\x40",
    ),
    (
        NBTFile(TAG_Double(-5.0), "name"),
        b"\x06\x00\x04name\xc0\x14\x00\x00\x00\x00\x00\x00",
        b"\x06\x04\x00name\x00\x00\x00\x00\x00\x00\x14\xc0",
    ),
    (
        NBTFile(TAG_Byte_Array([]), "name"),
        b"\x07\x00\x04name\x00\x00\x00\x00",
        b"\x07\x04\x00name\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Byte_Array([5, 6, 7]), "name"),
        b"\x07\x00\x04name\x00\x00\x00\x03\x05\x06\x07",
        b"\x07\x04\x00name\x03\x00\x00\x00\x05\x06\x07",
    ),
    (
        NBTFile(TAG_Byte_Array([-5, -6, -7]), "name"),
        b"\x07\x00\x04name\x00\x00\x00\x03\xfb\xfa\xf9",
        b"\x07\x04\x00name\x03\x00\x00\x00\xfb\xfa\xf9",
    ),
    (
        NBTFile(TAG_Int_Array([]), "name"),
        b"\x0b\x00\x04name\x00\x00\x00\x00",
        b"\x0b\x04\x00name\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Int_Array([5, 6, 7]), "name"),
        b"\x0b\x00\x04name\x00\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07",
        b"\x0b\x04\x00name\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Int_Array([-5, -6, -7]), "name"),
        b"\x0b\x00\x04name\x00\x00\x00\x03\xff\xff\xff\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9",
        b"\x0b\x04\x00name\x03\x00\x00\x00\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9\xff\xff\xff",
    ),
    (
        NBTFile(TAG_Long_Array([]), "name"),
        b"\x0c\x00\x04name\x00\x00\x00\x00",
        b"\x0c\x04\x00name\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Long_Array([5, 6, 7]), "name"),
        b"\x0c\x00\x04name\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07",
        b"\x0c\x04\x00name\x03\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Long_Array([-5, -6, -7]), "name"),
        b"\x0c\x00\x04name\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9",
        b"\x0c\x04\x00name\x03\x00\x00\x00\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9\xff\xff\xff\xff\xff\xff\xff",
    ),
    (
        NBTFile(TAG_String("value"), "name"),
        b"\x08\x00\x04name\x00\x05value",
        b"\x08\x04\x00name\x05\x00value",
    ),
    (
        NBTFile(TAG_List([], 1), "name"),
        b"\t\x00\x04name\x01\x00\x00\x00\x00",
        b"\t\x04\x00name\x01\x00\x00\x00\x00",
    ),
    (NBTFile(TAG_Compound({}), "name"), b"\n\x00\x04name\x00", b"\n\x04\x00name\x00"),
    (
        NBTFile(TAG_List([TAG_Byte(5)], 1), "name"),
        b"\t\x00\x04name\x01\x00\x00\x00\x01\x05",
        b"\t\x04\x00name\x01\x01\x00\x00\x00\x05",
    ),
    (
        NBTFile(TAG_List([TAG_Byte(-5)], 1), "name"),
        b"\t\x00\x04name\x01\x00\x00\x00\x01\xfb",
        b"\t\x04\x00name\x01\x01\x00\x00\x00\xfb",
    ),
    (
        NBTFile(TAG_List([TAG_Short(5)], 2), "name"),
        b"\t\x00\x04name\x02\x00\x00\x00\x01\x00\x05",
        b"\t\x04\x00name\x02\x01\x00\x00\x00\x05\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Short(-5)], 2), "name"),
        b"\t\x00\x04name\x02\x00\x00\x00\x01\xff\xfb",
        b"\t\x04\x00name\x02\x01\x00\x00\x00\xfb\xff",
    ),
    (
        NBTFile(TAG_List([TAG_Int(5)], 3), "name"),
        b"\t\x00\x04name\x03\x00\x00\x00\x01\x00\x00\x00\x05",
        b"\t\x04\x00name\x03\x01\x00\x00\x00\x05\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Int(-5)], 3), "name"),
        b"\t\x00\x04name\x03\x00\x00\x00\x01\xff\xff\xff\xfb",
        b"\t\x04\x00name\x03\x01\x00\x00\x00\xfb\xff\xff\xff",
    ),
    (
        NBTFile(TAG_List([TAG_Long(5)], 4), "name"),
        b"\t\x00\x04name\x04\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x05",
        b"\t\x04\x00name\x04\x01\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Long(-5)], 4), "name"),
        b"\t\x00\x04name\x04\x00\x00\x00\x01\xff\xff\xff\xff\xff\xff\xff\xfb",
        b"\t\x04\x00name\x04\x01\x00\x00\x00\xfb\xff\xff\xff\xff\xff\xff\xff",
    ),
    (
        NBTFile(TAG_List([TAG_Float(5.0)], 5), "name"),
        b"\t\x00\x04name\x05\x00\x00\x00\x01\x40\xa0\x00\x00",
        b"\t\x04\x00name\x05\x01\x00\x00\x00\x00\x00\xa0\x40",
    ),
    (
        NBTFile(TAG_List([TAG_Float(-5.0)], 5), "name"),
        b"\t\x00\x04name\x05\x00\x00\x00\x01\xc0\xa0\x00\x00",
        b"\t\x04\x00name\x05\x01\x00\x00\x00\x00\x00\xa0\xc0",
    ),
    (
        NBTFile(TAG_List([TAG_Double(5.0)], 6), "name"),
        b"\t\x00\x04name\x06\x00\x00\x00\x01\x40\x14\x00\x00\x00\x00\x00\x00",
        b"\t\x04\x00name\x06\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x14\x40",
    ),
    (
        NBTFile(TAG_List([TAG_Double(-5.0)], 6), "name"),
        b"\t\x00\x04name\x06\x00\x00\x00\x01\xc0\x14\x00\x00\x00\x00\x00\x00",
        b"\t\x04\x00name\x06\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x14\xc0",
    ),
    (
        NBTFile(TAG_List([TAG_Byte_Array([])], 7), "name"),
        b"\t\x00\x04name\x07\x00\x00\x00\x01\x00\x00\x00\x00",
        b"\t\x04\x00name\x07\x01\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Byte_Array([5, 6, 7])], 7), "name"),
        b"\t\x00\x04name\x07\x00\x00\x00\x01\x00\x00\x00\x03\x05\x06\x07",
        b"\t\x04\x00name\x07\x01\x00\x00\x00\x03\x00\x00\x00\x05\x06\x07",
    ),
    (
        NBTFile(TAG_List([TAG_Byte_Array([-5, -6, -7])], 7), "name"),
        b"\t\x00\x04name\x07\x00\x00\x00\x01\x00\x00\x00\x03\xfb\xfa\xf9",
        b"\t\x04\x00name\x07\x01\x00\x00\x00\x03\x00\x00\x00\xfb\xfa\xf9",
    ),
    (
        NBTFile(TAG_List([TAG_Int_Array([])], 11), "name"),
        b"\t\x00\x04name\x0b\x00\x00\x00\x01\x00\x00\x00\x00",
        b"\t\x04\x00name\x0b\x01\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Int_Array([5, 6, 7])], 11), "name"),
        b"\t\x00\x04name\x0b\x00\x00\x00\x01\x00\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07",
        b"\t\x04\x00name\x0b\x01\x00\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Int_Array([-5, -6, -7])], 11), "name"),
        b"\t\x00\x04name\x0b\x00\x00\x00\x01\x00\x00\x00\x03\xff\xff\xff\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9",
        b"\t\x04\x00name\x0b\x01\x00\x00\x00\x03\x00\x00\x00\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9\xff\xff\xff",
    ),
    (
        NBTFile(TAG_List([TAG_Long_Array([])], 12), "name"),
        b"\t\x00\x04name\x0c\x00\x00\x00\x01\x00\x00\x00\x00",
        b"\t\x04\x00name\x0c\x01\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Long_Array([5, 6, 7])], 12), "name"),
        b"\t\x00\x04name\x0c\x00\x00\x00\x01\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07",
        b"\t\x04\x00name\x0c\x01\x00\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Long_Array([-5, -6, -7])], 12), "name"),
        b"\t\x00\x04name\x0c\x00\x00\x00\x01\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9",
        b"\t\x04\x00name\x0c\x01\x00\x00\x00\x03\x00\x00\x00\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9\xff\xff\xff\xff\xff\xff\xff",
    ),
    (
        NBTFile(TAG_List([TAG_String("value")], 8), "name"),
        b"\t\x00\x04name\x08\x00\x00\x00\x01\x00\x05value",
        b"\t\x04\x00name\x08\x01\x00\x00\x00\x05\x00value",
    ),
    (
        NBTFile(TAG_List([TAG_List([], 1)], 9), "name"),
        b"\t\x00\x04name\t\x00\x00\x00\x01\x01\x00\x00\x00\x00",
        b"\t\x04\x00name\t\x01\x00\x00\x00\x01\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_List([TAG_Compound({})], 10), "name"),
        b"\t\x00\x04name\n\x00\x00\x00\x01\x00",
        b"\t\x04\x00name\n\x01\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Byte(5)}), "name"),
        b"\n\x00\x04name\x01\x00\x03key\x05\x00",
        b"\n\x04\x00name\x01\x03\x00key\x05\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Byte(-5)}), "name"),
        b"\n\x00\x04name\x01\x00\x03key\xfb\x00",
        b"\n\x04\x00name\x01\x03\x00key\xfb\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Short(5)}), "name"),
        b"\n\x00\x04name\x02\x00\x03key\x00\x05\x00",
        b"\n\x04\x00name\x02\x03\x00key\x05\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Short(-5)}), "name"),
        b"\n\x00\x04name\x02\x00\x03key\xff\xfb\x00",
        b"\n\x04\x00name\x02\x03\x00key\xfb\xff\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Int(5)}), "name"),
        b"\n\x00\x04name\x03\x00\x03key\x00\x00\x00\x05\x00",
        b"\n\x04\x00name\x03\x03\x00key\x05\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Int(-5)}), "name"),
        b"\n\x00\x04name\x03\x00\x03key\xff\xff\xff\xfb\x00",
        b"\n\x04\x00name\x03\x03\x00key\xfb\xff\xff\xff\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Long(5)}), "name"),
        b"\n\x00\x04name\x04\x00\x03key\x00\x00\x00\x00\x00\x00\x00\x05\x00",
        b"\n\x04\x00name\x04\x03\x00key\x05\x00\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Long(-5)}), "name"),
        b"\n\x00\x04name\x04\x00\x03key\xff\xff\xff\xff\xff\xff\xff\xfb\x00",
        b"\n\x04\x00name\x04\x03\x00key\xfb\xff\xff\xff\xff\xff\xff\xff\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Float(5.0)}), "name"),
        b"\n\x00\x04name\x05\x00\x03key\x40\xa0\x00\x00\x00",
        b"\n\x04\x00name\x05\x03\x00key\x00\x00\xa0\x40\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Float(-5.0)}), "name"),
        b"\n\x00\x04name\x05\x00\x03key\xc0\xa0\x00\x00\x00",
        b"\n\x04\x00name\x05\x03\x00key\x00\x00\xa0\xc0\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Double(5.0)}), "name"),
        b"\n\x00\x04name\x06\x00\x03key\x40\x14\x00\x00\x00\x00\x00\x00\x00",
        b"\n\x04\x00name\x06\x03\x00key\x00\x00\x00\x00\x00\x00\x14\x40\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Double(-5.0)}), "name"),
        b"\n\x00\x04name\x06\x00\x03key\xc0\x14\x00\x00\x00\x00\x00\x00\x00",
        b"\n\x04\x00name\x06\x03\x00key\x00\x00\x00\x00\x00\x00\x14\xc0\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Byte_Array([])}), "name"),
        b"\n\x00\x04name\x07\x00\x03key\x00\x00\x00\x00\x00",
        b"\n\x04\x00name\x07\x03\x00key\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Byte_Array([5, 6, 7])}), "name"),
        b"\n\x00\x04name\x07\x00\x03key\x00\x00\x00\x03\x05\x06\x07\x00",
        b"\n\x04\x00name\x07\x03\x00key\x03\x00\x00\x00\x05\x06\x07\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Byte_Array([-5, -6, -7])}), "name"),
        b"\n\x00\x04name\x07\x00\x03key\x00\x00\x00\x03\xfb\xfa\xf9\x00",
        b"\n\x04\x00name\x07\x03\x00key\x03\x00\x00\x00\xfb\xfa\xf9\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Int_Array([])}), "name"),
        b"\n\x00\x04name\x0b\x00\x03key\x00\x00\x00\x00\x00",
        b"\n\x04\x00name\x0b\x03\x00key\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Int_Array([5, 6, 7])}), "name"),
        b"\n\x00\x04name\x0b\x00\x03key\x00\x00\x00\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07\x00",
        b"\n\x04\x00name\x0b\x03\x00key\x03\x00\x00\x00\x05\x00\x00\x00\x06\x00\x00\x00\x07\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Int_Array([-5, -6, -7])}), "name"),
        b"\n\x00\x04name\x0b\x00\x03key\x00\x00\x00\x03\xff\xff\xff\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9\x00",
        b"\n\x04\x00name\x0b\x03\x00key\x03\x00\x00\x00\xfb\xff\xff\xff\xfa\xff\xff\xff\xf9\xff\xff\xff\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Long_Array([])}), "name"),
        b"\n\x00\x04name\x0c\x00\x03key\x00\x00\x00\x00\x00",
        b"\n\x04\x00name\x0c\x03\x00key\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Long_Array([5, 6, 7])}), "name"),
        b"\n\x00\x04name\x0c\x00\x03key\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07\x00",
        b"\n\x04\x00name\x0c\x03\x00key\x03\x00\x00\x00\x05\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x07\x00\x00\x00\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Long_Array([-5, -6, -7])}), "name"),
        b"\n\x00\x04name\x0c\x00\x03key\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9\x00",
        b"\n\x04\x00name\x0c\x03\x00key\x03\x00\x00\x00\xfb\xff\xff\xff\xff\xff\xff\xff\xfa\xff\xff\xff\xff\xff\xff\xff\xf9\xff\xff\xff\xff\xff\xff\xff\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_String("value")}), "name"),
        b"\n\x00\x04name\x08\x00\x03key\x00\x05value\x00",
        b"\n\x04\x00name\x08\x03\x00key\x05\x00value\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_List([], 1)}), "name"),
        b"\n\x00\x04name\t\x00\x03key\x01\x00\x00\x00\x00\x00",
        b"\n\x04\x00name\t\x03\x00key\x01\x00\x00\x00\x00\x00",
    ),
    (
        NBTFile(TAG_Compound({"key": TAG_Compound({})}), "name"),
        b"\n\x00\x04name\n\x00\x03key\x00\x00",
        b"\n\x04\x00name\n\x03\x00key\x00\x00",
    ),
]


class NBTTests(unittest.TestCase):
    def test_read_big_endian(self):
        for obj, be_bytes, le_bytes in tests:
            self.assertEqual(obj, amulet_nbt.load(be_bytes), msg=str(obj))

    def test_read_little_endian(self):
        for obj, be_bytes, le_bytes in tests:
            self.assertEqual(
                obj, amulet_nbt.load(le_bytes, little_endian=True), msg=str(obj)
            )

    def test_write_big_endian(self):
        for obj, be_bytes, le_bytes in tests:
            self.assertEqual(obj.to_nbt(False), be_bytes, msg=str(obj))

    def test_write_little_endian(self):
        for obj, be_bytes, le_bytes in tests:
            self.assertEqual(obj.to_nbt(False, True), le_bytes, msg=str(obj))


if __name__ == "__main__":
    unittest.main()
